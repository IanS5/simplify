langauge: c
python:
  - "2.7"

sudo: required
dist: trusty

compiler:
 - clang
 - gcc

install: bash ./get-deps.sh

env:
  global:
    - CTEST_EXT_COLOR_OUTPUT=TRUE
    - CTEST_BUILD_FLAGS=-j4

script:
 - python ./deps/cpplint.py ./src/**/*.* ./src/*.*
 - mkdir build
 - cd build
 - cmake ..
 - cmake --build .
 - ctest -VV

addons:
  apt:
    packages:
      - valgrind


cache:
  directories:
    - ./deps